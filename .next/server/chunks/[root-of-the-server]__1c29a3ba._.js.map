{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/lib/firebaseAdmin.ts"],"sourcesContent":["import { initializeApp, getApps, cert } from 'firebase-admin/app';\r\n\r\nexport function initFirebaseAdmin() {\r\n  if (!getApps().length) {\r\n    initializeApp({\r\n      credential: cert({\r\n        projectId: process.env.FIREBASE_PROJECT_ID,\r\n        clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\r\n        privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n'),\r\n      }),\r\n    });\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;;;;;;AAEO,SAAS;IACd,IAAI,CAAC,IAAA,2JAAO,IAAG,MAAM,EAAE;QACrB,IAAA,iKAAa,EAAC;YACZ,YAAY,IAAA,wJAAI,EAAC;gBACf,WAAW,QAAQ,GAAG,CAAC,mBAAmB;gBAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;gBAC9C,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YAChE;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/lib/prisma.ts"],"sourcesContent":["\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ||\r\n  new PrismaClient();\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY;AAElB,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/app/api/docente/info/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { getAuth } from 'firebase-admin/auth';\r\nimport { initFirebaseAdmin } from '@/lib/firebaseAdmin';\r\nimport { prisma } from '../../../../lib/prisma';\r\n\r\ninitFirebaseAdmin();\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const authHeader = request.headers.get('authorization');\r\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n      return NextResponse.json(\r\n        { error: 'Token de autorización requerido' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    const idToken = authHeader.split('Bearer ')[1];\r\n    const decodedToken = await getAuth().verifyIdToken(idToken);\r\n\r\n    // Buscar el usuario docente\r\n    const docente = await prisma.user.findUnique({\r\n      where: { firebaseUid: decodedToken.uid },\r\n      select: {\r\n        id: true,\r\n        name: true,\r\n        email: true,\r\n        role: true,\r\n        active: true,\r\n        sedeId: true,\r\n        sede: {\r\n          select: {\r\n            nombre: true\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    if (!docente || docente.role !== 'DOCENTE') {\r\n      return NextResponse.json(\r\n        { error: 'Usuario no autorizado como docente' },\r\n        { status: 403 }\r\n      );\r\n    }\r\n\r\n    // Obtener asignaciones del docente\r\n    const materiaGradoDocentes = await prisma.materiaGradoDocente.findMany({\r\n      where: { docenteId: docente.id },\r\n      include: {\r\n        materiaGrado: {\r\n          include: {\r\n            materia: true,\r\n            grado: true\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    const gradosUnicos = new Set(materiaGradoDocentes.map(mgd => mgd.materiaGrado.gradoId));\r\n    const materiasUnicas = new Set(materiaGradoDocentes.map(mgd => mgd.materiaGrado.materiaId));\r\n\r\n    const resumen = {\r\n      totalAsignaciones: materiaGradoDocentes.length,\r\n      gradosActivos: gradosUnicos.size,\r\n      materiasAsignadas: materiasUnicas.size\r\n    };\r\n\r\n    return NextResponse.json({\r\n      docente,\r\n      resumen\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error en endpoint de información del docente:', error);\r\n    return NextResponse.json(\r\n      { error: 'Error interno del servidor' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;;;;;AAEA,IAAA,kJAAiB;AAEV,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;QACvC,IAAI,CAAC,cAAc,CAAC,WAAW,UAAU,CAAC,YAAY;YACpD,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkC,GAC3C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,UAAU,WAAW,KAAK,CAAC,UAAU,CAAC,EAAE;QAC9C,MAAM,eAAe,MAAM,IAAA,6JAAO,IAAG,aAAa,CAAC;QAEnD,4BAA4B;QAC5B,MAAM,UAAU,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAC3C,OAAO;gBAAE,aAAa,aAAa,GAAG;YAAC;YACvC,QAAQ;gBACN,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,MAAM;gBACN,QAAQ;gBACR,QAAQ;gBACR,MAAM;oBACJ,QAAQ;wBACN,QAAQ;oBACV;gBACF;YACF;QACF;QAEA,IAAI,CAAC,WAAW,QAAQ,IAAI,KAAK,WAAW;YAC1C,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAqC,GAC9C;gBAAE,QAAQ;YAAI;QAElB;QAEA,mCAAmC;QACnC,MAAM,uBAAuB,MAAM,gIAAM,CAAC,mBAAmB,CAAC,QAAQ,CAAC;YACrE,OAAO;gBAAE,WAAW,QAAQ,EAAE;YAAC;YAC/B,SAAS;gBACP,cAAc;oBACZ,SAAS;wBACP,SAAS;wBACT,OAAO;oBACT;gBACF;YACF;QACF;QAEA,MAAM,eAAe,IAAI,IAAI,qBAAqB,GAAG,CAAC,CAAA,MAAO,IAAI,YAAY,CAAC,OAAO;QACrF,MAAM,iBAAiB,IAAI,IAAI,qBAAqB,GAAG,CAAC,CAAA,MAAO,IAAI,YAAY,CAAC,SAAS;QAEzF,MAAM,UAAU;YACd,mBAAmB,qBAAqB,MAAM;YAC9C,eAAe,aAAa,IAAI;YAChC,mBAAmB,eAAe,IAAI;QACxC;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB;YACA;QACF;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iDAAiD;QAC/D,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA6B,GACtC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}