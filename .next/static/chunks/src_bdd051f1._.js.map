{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/hooks/useUserRole.ts"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/authContext';\r\n\r\n// Hook para obtener el rol del usuario desde la API interna (PostgreSQL)\r\nexport function useUserRole() {\r\n  const { user } = useAuth();\r\n  const [role, setRole] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setRole(null);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    // Llama a tu API interna para obtener el rol por UID de Firebase\r\n    const fetchRole = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(`/api/user-role?uid=${user.uid}`);\r\n        const data = await res.json();\r\n        setRole(data.role || null);\r\n      } catch (err) {\r\n        setRole(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchRole();\r\n  }, [user]);\r\n\r\n  return { role, loading };\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;AAFA;;;AAKO,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,4IAAO;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAgB;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;iCAAC;YACR,IAAI,CAAC,MAAM;gBACT,QAAQ;gBACR,WAAW;gBACX;YACF;YACA,iEAAiE;YACjE,MAAM;mDAAY;oBAChB,WAAW;oBACX,IAAI;wBACF,MAAM,MAAM,MAAM,MAAM,AAAC,sBAA8B,OAAT,KAAK,GAAG;wBACtD,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,QAAQ,KAAK,IAAI,IAAI;oBACvB,EAAE,OAAO,KAAK;wBACZ,QAAQ;oBACV,SAAU;wBACR,WAAW;oBACb;gBACF;;YACA;QACF;gCAAG;QAAC;KAAK;IAET,OAAO;QAAE;QAAM;IAAQ;AACzB;GA5BgB;;QACG,4IAAO","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/ui/LoadingModal.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"overlay\": \"LoadingModal-module__WP8uBG__overlay\",\n  \"panel\": \"LoadingModal-module__WP8uBG__panel\",\n  \"srOnly\": \"LoadingModal-module__WP8uBG__srOnly\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/ui/Loading.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"loadingRoot\": \"Loading-module__2aO0xG__loadingRoot\",\n  \"spin\": \"Loading-module__2aO0xG__spin\",\n  \"spinner\": \"Loading-module__2aO0xG__spinner\",\n  \"text\": \"Loading-module__2aO0xG__text\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ui/Loading.tsx"],"sourcesContent":["import React from 'react';\r\nimport styles from './Loading.module.css';\r\n\r\ninterface Props { message?: string }\r\n\r\nexport default function Loading({ message = 'Cargando...' }: Props) {\r\n  return (\r\n    <div className={styles.loadingRoot}>\r\n      <div className={styles.spinner} aria-hidden=\"true\" />\r\n      <div className={styles.text}>{message}</div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAIe,SAAS,QAAQ,KAAkC;QAAlC,EAAE,UAAU,aAAa,EAAS,GAAlC;IAC9B,qBACE,6LAAC;QAAI,WAAW,4JAAM,CAAC,WAAW;;0BAChC,6LAAC;gBAAI,WAAW,4JAAM,CAAC,OAAO;gBAAE,eAAY;;;;;;0BAC5C,6LAAC;gBAAI,WAAW,4JAAM,CAAC,IAAI;0BAAG;;;;;;;;;;;;AAGpC;KAPwB","debugId":null}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ui/LoadingModal.tsx"],"sourcesContent":["import React from 'react';\r\nimport styles from './LoadingModal.module.css';\r\nimport Loading from './Loading';\r\n\r\ninterface Props { open: boolean; message?: string }\r\n\r\nexport default function LoadingModal({ open, message = 'Cargando...' }: Props) {\r\n  if (!open) return null;\r\n  return (\r\n    <div className={styles.overlay} role=\"status\" aria-live=\"polite\">\r\n      <div className={styles.panel}>\r\n        <Loading message={message} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAIe,SAAS,aAAa,KAAwC;QAAxC,EAAE,IAAI,EAAE,UAAU,aAAa,EAAS,GAAxC;IACnC,IAAI,CAAC,MAAM,OAAO;IAClB,qBACE,6LAAC;QAAI,WAAW,iKAAM,CAAC,OAAO;QAAE,MAAK;QAAS,aAAU;kBACtD,cAAA,6LAAC;YAAI,WAAW,iKAAM,CAAC,KAAK;sBAC1B,cAAA,6LAAC,iJAAO;gBAAC,SAAS;;;;;;;;;;;;;;;;AAI1B;KATwB","debugId":null}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react';\r\nimport { useAuth } from '../context/authContext';\r\nimport { useUserRole } from '../hooks/useUserRole';\r\nimport Loading from './ui/Loading';\r\nimport LoadingModal from './ui/LoadingModal';\r\n\r\n// Componente para proteger rutas según autenticación y rol\r\nexport default function ProtectedRoute({ children, allowedRoles }: { children: React.ReactNode, allowedRoles?: string[] }) {\r\n  const { user, loading: authLoading } = useAuth();\r\n  const { role, loading: roleLoading } = useUserRole();\r\n\r\n  if (authLoading || roleLoading) return <LoadingModal open={true} message=\"Cargando...\" />;\r\n  if (!user) {\r\n    if (typeof window !== 'undefined') {\r\n      window.location.href = '/login';\r\n    }\r\n    return null;\r\n  }\r\n\r\n  if (allowedRoles && (!role || !allowedRoles.includes(role))) {\r\n    return <div>No tienes permiso para acceder a esta página.</div>;\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;;;AALA;;;;AAQe,SAAS,eAAe,KAAkF;QAAlF,EAAE,QAAQ,EAAE,YAAY,EAA0D,GAAlF;;IACrC,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,GAAG,IAAA,4IAAO;IAC9C,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,GAAG,IAAA,6IAAW;IAElD,IAAI,eAAe,aAAa,qBAAO,6LAAC,sJAAY;QAAC,MAAM;QAAM,SAAQ;;;;;;IACzE,IAAI,CAAC,MAAM;QACT,wCAAmC;YACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;QACA,OAAO;IACT;IAEA,IAAI,gBAAgB,CAAC,CAAC,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,GAAG;QAC3D,qBAAO,6LAAC;sBAAI;;;;;;IACd;IAEA,qBAAO;kBAAG;;AACZ;GAjBwB;;QACiB,4IAAO;QACP,6IAAW;;;KAF5B","debugId":null}}]
}