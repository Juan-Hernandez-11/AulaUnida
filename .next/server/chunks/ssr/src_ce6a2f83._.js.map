{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/hooks/useUserRole.ts"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/authContext';\r\n\r\n// Hook para obtener el rol del usuario desde la API interna (PostgreSQL)\r\nexport function useUserRole() {\r\n  const { user } = useAuth();\r\n  const [role, setRole] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setRole(null);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    // Llama a tu API interna para obtener el rol por UID de Firebase\r\n    const fetchRole = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(`/api/user-role?uid=${user.uid}`);\r\n        const data = await res.json();\r\n        setRole(data.role || null);\r\n      } catch (err) {\r\n        setRole(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchRole();\r\n  }, [user]);\r\n\r\n  return { role, loading };\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;AAKO,SAAS;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,yIAAO;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAgB;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM;YACT,QAAQ;YACR,WAAW;YACX;QACF;QACA,iEAAiE;QACjE,MAAM,YAAY;YAChB,WAAW;YACX,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,CAAC,mBAAmB,EAAE,KAAK,GAAG,EAAE;gBACxD,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,QAAQ,KAAK,IAAI,IAAI;YACvB,EAAE,OAAO,KAAK;gBACZ,QAAQ;YACV,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG;QAAC;KAAK;IAET,OAAO;QAAE;QAAM;IAAQ;AACzB","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ProtectedRoute.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useAuth } from '../context/authContext';\r\nimport { useUserRole } from '../hooks/useUserRole';\r\n\r\n// Componente para proteger rutas según autenticación y rol\r\nexport default function ProtectedRoute({ children, allowedRoles }: { children: React.ReactNode, allowedRoles?: string[] }) {\r\n  const { user, loading: authLoading } = useAuth();\r\n  const { role, loading: roleLoading } = useUserRole();\r\n\r\n  if (authLoading || roleLoading) return <div>Cargando...</div>;\r\n  if (!user) {\r\n    if (typeof window !== 'undefined') {\r\n      window.location.href = '/login';\r\n    }\r\n    return null;\r\n  }\r\n\r\n  if (allowedRoles && (!role || !allowedRoles.includes(role))) {\r\n    return <div>No tienes permiso para acceder a esta página.</div>;\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAGe,SAAS,eAAe,EAAE,QAAQ,EAAE,YAAY,EAA0D;IACvH,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,GAAG,IAAA,yIAAO;IAC9C,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,GAAG,IAAA,0IAAW;IAElD,IAAI,eAAe,aAAa,qBAAO,8OAAC;kBAAI;;;;;;IAC5C,IAAI,CAAC,MAAM;QACT;;QAGA,OAAO;IACT;IAEA,IAAI,gBAAgB,CAAC,CAAC,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,GAAG;QAC3D,qBAAO,8OAAC;sBAAI;;;;;;IACd;IAEA,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\r\nimport ProtectedRoute from '../../components/ProtectedRoute';\r\nimport { useAuth } from '../../context/authContext';\r\nimport { UserCircleIcon, BookOpenIcon, CalendarIcon, UsersIcon, ClipboardListIcon, AcademicCapIcon, ChartBarIcon, SpeakerphoneIcon, Cog6ToothIcon, QuestionMarkCircleIcon } from '@heroicons/react/24/outline';\r\n\r\nconst metrics = [\r\n  { label: 'Usuarios Activos', value: '1,250' },\r\n  { label: 'Grados Registrados', value: '60' },\r\n  { label: 'Anuncios Recientes', value: '15' },\r\n];\r\n\r\nconst activity = [\r\n  { user: 'Isabella Rodriguez', action: 'Creó un nuevo usuario: \"Juan Perez\"', date: '2024-07-26' },\r\n  { user: 'Mateo Vargas', action: 'Actualizó la información del grado \"5° A\"', date: '2024-07-25' },\r\n  { user: 'Sofía Herrera', action: 'Eliminó la asignatura \"Historia\"', date: '2024-07-24' },\r\n  { user: 'Diego Castro', action: 'Publicó un nuevo anuncio general', date: '2024-07-23' },\r\n  { user: 'Lucía Mendoza', action: 'Generó un reporte de matrículas', date: '2024-07-22' },\r\n];\r\n\r\nconst sidebarLinks = [\r\n  { label: 'Gestión de Usuarios', icon: UsersIcon },\r\n  { label: 'Grados/Secciones', icon: AcademicCapIcon },\r\n  { label: 'Asignaturas', icon: BookOpenIcon },\r\n  { label: 'Horarios', icon: CalendarIcon },\r\n  { label: 'Matrícula', icon: ClipboardListIcon },\r\n  { label: 'Ciclos Lectivos', icon: CalendarIcon },\r\n  { label: 'Reportes', icon: ChartBarIcon },\r\n  { label: 'Anuncios', icon: SpeakerphoneIcon },\r\n  { label: 'Configuración', icon: Cog6ToothIcon },\r\n  { label: 'Ayuda/FAQs', icon: QuestionMarkCircleIcon },\r\n];\r\n\r\nexport default function AdminDashboardPage() {\r\n  const { logout } = useAuth();\r\n  return (\r\n    <ProtectedRoute allowedRoles={[\"ADMIN\"]}>\r\n      <div className=\"flex min-h-screen bg-gray-900 text-white\">\r\n        {/* Sidebar */}\r\n        <aside className=\"w-64 bg-gray-950 flex flex-col p-6 border-r border-gray-800\">\r\n          <div className=\"flex items-center mb-10\">\r\n            <img src=\"https://randomuser.me/api/portraits/women/44.jpg\" alt=\"Admin\" className=\"w-12 h-12 rounded-full mr-3 border-2 border-green-400\" />\r\n            <span className=\"text-2xl font-bold tracking-tight\">AulaUnida</span>\r\n          </div>\r\n          <nav className=\"flex-1\">\r\n            <ul className=\"space-y-2\">\r\n              {sidebarLinks.map((link, idx) => (\r\n                <li key={link.label}>\r\n                  <a href=\"#\" className={`flex items-center px-4 py-2 rounded-lg transition-colors ${idx === 0 ? 'bg-green-600 text-white' : 'hover:bg-gray-800'}`}>\r\n                    <link.icon className=\"w-5 h-5 mr-3\" />\r\n                    {link.label}\r\n                  </a>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </nav>\r\n          <button onClick={logout} className=\"mt-8 bg-red-500 hover:bg-red-600 text-white py-2 rounded-lg font-semibold transition-colors\">Cerrar sesión</button>\r\n        </aside>\r\n\r\n        {/* Main content */}\r\n        <main className=\"flex-1 p-10 bg-gray-900\">\r\n          <h1 className=\"text-4xl font-extrabold mb-2\">Panel de Administrador</h1>\r\n          <p className=\"text-gray-300 mb-8\">Bienvenido, aquí tienes un resumen del estado del sistema.</p>\r\n\r\n          {/* Métricas */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10\">\r\n            {metrics.map((m) => (\r\n              <div key={m.label} className=\"bg-gray-800 rounded-xl p-8 flex flex-col items-center shadow-lg\">\r\n                <span className=\"text-lg text-gray-400 mb-2\">{m.label}</span>\r\n                <span className=\"text-4xl font-bold text-green-400\">{m.value}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Actividad reciente */}\r\n          <div className=\"bg-gray-800 rounded-xl p-8 shadow-lg\">\r\n            <h2 className=\"text-2xl font-bold mb-6\">Actividad Reciente</h2>\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full text-left\">\r\n                <thead>\r\n                  <tr className=\"text-gray-400 border-b border-gray-700\">\r\n                    <th className=\"py-2 px-4\">USUARIO</th>\r\n                    <th className=\"py-2 px-4\">ACCIÓN</th>\r\n                    <th className=\"py-2 px-4\">FECHA</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {activity.map((a, idx) => (\r\n                    <tr key={idx} className=\"border-b border-gray-800 hover:bg-gray-700/30\">\r\n                      <td className=\"py-2 px-4 font-semibold\">{a.user}</td>\r\n                      <td className=\"py-2 px-4\">{a.action}</td>\r\n                      <td className=\"py-2 px-4\">{a.date}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}