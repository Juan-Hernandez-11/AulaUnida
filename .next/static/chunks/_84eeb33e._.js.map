{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/styles/estudiante-asignaturas.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"card\": \"estudiante-asignaturas-module__CZPePW__card\",\n  \"cardBody\": \"estudiante-asignaturas-module__CZPePW__cardBody\",\n  \"cardHeader\": \"estudiante-asignaturas-module__CZPePW__cardHeader\",\n  \"container\": \"estudiante-asignaturas-module__CZPePW__container\",\n  \"empty\": \"estudiante-asignaturas-module__CZPePW__empty\",\n  \"grid\": \"estudiante-asignaturas-module__CZPePW__grid\",\n  \"matAverage\": \"estudiante-asignaturas-module__CZPePW__matAverage\",\n  \"matTitle\": \"estudiante-asignaturas-module__CZPePW__matTitle\",\n  \"notePeriod\": \"estudiante-asignaturas-module__CZPePW__notePeriod\",\n  \"noteRow\": \"estudiante-asignaturas-module__CZPePW__noteRow\",\n  \"noteValue\": \"estudiante-asignaturas-module__CZPePW__noteValue\",\n  \"smallButton\": \"estudiante-asignaturas-module__CZPePW__smallButton\",\n  \"title\": \"estudiante-asignaturas-module__CZPePW__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/ui/Button.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"ghost\": \"Button-module__8RiFmG__ghost\",\n  \"icon\": \"Button-module__8RiFmG__icon\",\n  \"primary\": \"Button-module__8RiFmG__primary\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ui/Button.tsx"],"sourcesContent":["import React from 'react';\r\nimport styles from './Button.module.css';\r\n\r\ntype Props = React.ButtonHTMLAttributes<HTMLButtonElement> & {\r\n  variant?: 'primary' | 'ghost';\r\n  icon?: React.ReactNode;\r\n};\r\n\r\nexport default function Button({ variant = 'primary', icon, children, className, ...rest }: Props) {\r\n  const cls = `${variant === 'primary' ? styles.primary : styles.ghost} ${className || ''}`.trim();\r\n  return (\r\n    <button {...rest} className={cls}>\r\n      {icon && <span className={styles.icon}>{icon}</span>}\r\n      <span>{children}</span>\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAOe,SAAS,OAAO,KAAkE;QAAlE,EAAE,UAAU,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,MAAa,GAAlE;IAC7B,MAAM,MAAM,AAAC,GAA2D,OAAzD,YAAY,YAAY,2JAAM,CAAC,OAAO,GAAG,2JAAM,CAAC,KAAK,EAAC,KAAmB,OAAhB,aAAa,IAAK,IAAI;IAC9F,qBACE,6LAAC;QAAQ,GAAG,IAAI;QAAE,WAAW;;YAC1B,sBAAQ,6LAAC;gBAAK,WAAW,2JAAM,CAAC,IAAI;0BAAG;;;;;;0BACxC,6LAAC;0BAAM;;;;;;;;;;;;AAGb;KARwB","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/icons/TriangleIcon.tsx"],"sourcesContent":["export default function TriangleIcon({ size = 16 }: { size?: number }) {\r\n  return (\r\n    <svg width={size} height={size} fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" aria-hidden>\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\r\n    </svg>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAe,SAAS,aAAa,KAAgC;QAAhC,EAAE,OAAO,EAAE,EAAqB,GAAhC;IACnC,qBACE,6LAAC;QAAI,OAAO;QAAM,QAAQ;QAAM,MAAK;QAAO,QAAO;QAAe,aAAY;QAAI,SAAQ;QAAY,aAAW;kBAC/G,cAAA,6LAAC;YAAK,eAAc;YAAQ,gBAAe;YAAQ,GAAE;;;;;;;;;;;AAG3D;KANwB","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/app/estudiante/asignaturas/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '../../../context/authContext';\r\nimport styles from '../../../styles/estudiante-asignaturas.module.css';\r\nimport { useRouter } from 'next/navigation';\r\nimport Button from '../../../components/ui/Button';\r\nimport TriangleIcon from '../../../components/icons/TriangleIcon';\r\n\r\nexport default function AsignaturasPage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const [notas, setNotas] = useState<any[]>([]);\r\n  const [mergedMaterias, setMergedMaterias] = useState<Record<string, any[]>>({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    setLoading(true);\r\n    user.getIdToken().then(async (token) => {\r\n      try {\r\n        const headers = { Authorization: `Bearer ${token}` };\r\n        // Traer notas y horario en paralelo\r\n        const [nRes, hRes] = await Promise.all([\r\n          fetch('/api/estudiante/notas', { headers }),\r\n          fetch('/api/estudiante/horario', { headers })\r\n        ]);\r\n        if (!nRes.ok) throw new Error('Error al obtener notas');\r\n        if (!hRes.ok) throw new Error('Error al obtener horario');\r\n        const nData = await nRes.json();\r\n        const hData = await hRes.json();\r\n        setNotas(Array.isArray(nData) ? nData : []);\r\n\r\n        // Construir mapa de materias: tomar nombres desde horario y desde notas\r\n        const materiasFromHorario = Array.isArray(hData) ? Array.from(new Set(hData.map((h: any) => String(h.materia)))) : [];\r\n        const materiasFromNotas = Array.isArray(nData) ? Array.from(new Set(nData.map((n: any) => n.materia?.nombre).filter(Boolean))) : [];\r\n        // Unir ambas listas\r\n        const union = Array.from(new Set([...materiasFromHorario, ...materiasFromNotas]));\r\n\r\n        // Si hay materias sin notas, las incluimos en el objeto materias con array vacÃ­o\r\n        const notasMap = (Array.isArray(nData) ? nData : []).reduce((acc: any, cur: any) => {\r\n          const nombre = cur.materia?.nombre || 'Sin materia';\r\n          if (!acc[nombre]) acc[nombre] = [];\r\n          acc[nombre].push(cur);\r\n          return acc;\r\n        }, {} as Record<string, any[]>);\r\n\r\n        // Construir objeto final garantizando todas las materias del union\r\n        const merged: Record<string, any[]> = {};\r\n        union.forEach((m: string) => {\r\n          merged[m] = notasMap[m] || [];\r\n        });\r\n\r\n        setNotas(Array.isArray(nData) ? nData : []);\r\n        setMergedMaterias(merged);\r\n        setError(null);\r\n      } catch (err: any) {\r\n        setError(err.message || 'Error');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }).catch(err => { setError('No se pudo obtener token'); setLoading(false); });\r\n  }, [user]);\r\n\r\n  // Recuperar las materias mergeadas que construimos en el effect\r\n  const materias = Object.keys(mergedMaterias).length ? mergedMaterias : notas.reduce((acc: any, n: any) => {\r\n    const nombre = n.materia?.nombre || 'Sin materia';\r\n    if (!acc[nombre]) acc[nombre] = [];\r\n    acc[nombre].push(n);\r\n    return acc;\r\n  }, {} as Record<string, any[]>);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h2 className={styles.title}>Mis Asignaturas</h2>\r\n      {loading && <p>Cargando asignaturas...</p>}\r\n      {error && <p style={{color:'red'}}>{error}</p>}\r\n      {!loading && Object.keys(materias).length === 0 && <p className={styles.empty}>No hay asignaturas disponibles.</p>}\r\n\r\n      <div className={styles.grid}>\r\n        {Object.entries(materias).map(([mat, arr]: any, i) => {\r\n          const promedio = (arr.reduce((s: number, it: any) => s + (it.valor || 0), 0) / (arr.length || 1)).toFixed(2);\r\n          return (\r\n            <div key={i} className={styles.card}>\r\n              <div className={styles.cardHeader}>\r\n                <div className={styles.matTitle}>{mat}</div>\r\n                <div className={styles.matAverage}>Promedio: {promedio}</div>\r\n              </div>\r\n              <div className={styles.cardBody}>\r\n                {arr.map((nota: any, idx: number) => (\r\n                  <div key={idx} className={styles.noteRow}>\r\n                    <div className={styles.notePeriod}>{nota.periodo?.nombre || 'Periodo'}</div>\r\n                    <div className={styles.noteValue}>{nota.valor ?? '-'}</div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div style={{marginTop:20}}>\r\n        <Button variant=\"ghost\" onClick={() => router.push('/estudiante')} icon={<TriangleIcon />}>Volver al panel</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}