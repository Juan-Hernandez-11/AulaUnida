{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/ui/Button.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"ghost\": \"Button-module__8RiFmG__ghost\",\n  \"icon\": \"Button-module__8RiFmG__icon\",\n  \"primary\": \"Button-module__8RiFmG__primary\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 12, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ui/Button.tsx"],"sourcesContent":["import React from 'react';\r\nimport styles from './Button.module.css';\r\n\r\ntype Props = React.ButtonHTMLAttributes<HTMLButtonElement> & {\r\n  variant?: 'primary' | 'ghost';\r\n  icon?: React.ReactNode;\r\n};\r\n\r\nexport default function Button({ variant = 'primary', icon, children, className, ...rest }: Props) {\r\n  const cls = `${variant === 'primary' ? styles.primary : styles.ghost} ${className || ''}`.trim();\r\n  return (\r\n    <button {...rest} className={cls}>\r\n      {icon && <span className={styles.icon}>{icon}</span>}\r\n      <span>{children}</span>\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAOe,SAAS,OAAO,KAAkE;QAAlE,EAAE,UAAU,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,MAAa,GAAlE;IAC7B,MAAM,MAAM,AAAC,GAA2D,OAAzD,YAAY,YAAY,2JAAM,CAAC,OAAO,GAAG,2JAAM,CAAC,KAAK,EAAC,KAAmB,OAAhB,aAAa,IAAK,IAAI;IAC9F,qBACE,6LAAC;QAAQ,GAAG,IAAI;QAAE,WAAW;;YAC1B,sBAAQ,6LAAC;gBAAK,WAAW,2JAAM,CAAC,IAAI;0BAAG;;;;;;0BACxC,6LAAC;0BAAM;;;;;;;;;;;;AAGb;KARwB","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/app/estudiante/boletin/BoletinPDF.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport jsPDF from \"jspdf\";\r\nimport { useAuth } from \"../../../context/authContext\";\r\nimport Button from '../../../components/ui/Button';\r\n\r\nexport default function BoletinPDF({ estudianteId, estudianteUid, cicloId }: { estudianteId?: number, estudianteUid?: string, cicloId: number }) {\r\n  const [loading, setLoading] = useState(false);\r\n  const { user } = useAuth();\r\n\r\n  const generarPDF = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const token = user ? await user.getIdToken() : null;\r\n      const params = new URLSearchParams();\r\n      // Solo necesitamos cicloId; el backend usa el token para identificar al estudiante\r\n      params.set('cicloId', String(cicloId));\r\n      const res = await fetch(`/api/estudiante/boletin?${params.toString()}`, {\r\n        headers: {\r\n          ...(token ? { Authorization: `Bearer ${token}` } : {})\r\n        }\r\n      });\r\n      const data = await res.json();\r\n      if (!data.estudiante || !Array.isArray(data.notas)) {\r\n        setLoading(false);\r\n        alert(\"No se encontraron datos para el boletín\");\r\n        return;\r\n      }\r\n      const doc = new jsPDF();\r\n    // Encabezado\r\n    doc.setFontSize(16);\r\n    doc.text(\"Boletín Académico\", 20, 20);\r\n    doc.setFontSize(12);\r\n    doc.text(`Nombre: ${data.estudiante.name || \"-\"}` , 20, 35);\r\n    doc.text(`Documento: ${data.estudiante.documentNumber || \"-\"}` , 20, 42);\r\n  const grado = data.estudiante.estudianteGrados?.[0]?.grado;\r\n    doc.text(`Grado: ${grado?.nombre || \"-\"} ${grado?.seccion || \"\"}` , 20, 49);\r\n    doc.text(`Sede: ${grado?.sede?.nombre || \"-\"}` , 20, 56);\r\n    doc.text(`Ciclo: ${grado?.ciclo?.nombre || \"-\"}` , 20, 63);\r\n  // Tabla de notas\r\n    doc.text(\"Materia\", 20, 75);\r\n    doc.text(\"Periodo\", 80, 75);\r\n    doc.text(\"Nota\", 140, 75);\r\n    let y = 85;\r\n    data.notas.forEach((n: any) => {\r\n      doc.text(n.materia.nombre, 20, y);\r\n      doc.text(n.periodo.nombre, 80, y);\r\n      doc.text(String(n.valor), 140, y);\r\n      y += 8;\r\n    });\r\n    doc.save(\"boletin.pdf\");\r\n    setLoading(false);\r\n    } catch (err) {\r\n      console.error('Error generando PDF', err);\r\n      setLoading(false);\r\n      alert('Error al generar el boletín');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button variant=\"primary\" onClick={generarPDF} disabled={loading}>{loading ? \"Generando PDF...\" : \"Descargar Boletín PDF\"}</Button>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAMe,SAAS,WAAW,KAA4G;QAA5G,EAAE,YAAY,EAAE,aAAa,EAAE,OAAO,EAAsE,GAA5G;;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,4IAAO;IAExB,MAAM,aAAa;QACjB,WAAW;QACX,IAAI;gBAuBQ,oCAAA,mCAEM,aACC;YAzBjB,MAAM,QAAQ,OAAO,MAAM,KAAK,UAAU,KAAK;YAC/C,MAAM,SAAS,IAAI;YACnB,mFAAmF;YACnF,OAAO,GAAG,CAAC,WAAW,OAAO;YAC7B,MAAM,MAAM,MAAM,MAAM,AAAC,2BAA4C,OAAlB,OAAO,QAAQ,KAAM;gBACtE,SAAS;oBACP,GAAI,QAAQ;wBAAE,eAAe,AAAC,UAAe,OAAN;oBAAQ,IAAI,CAAC,CAAC;gBACvD;YACF;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,KAAK,UAAU,IAAI,CAAC,MAAM,OAAO,CAAC,KAAK,KAAK,GAAG;gBAClD,WAAW;gBACX,MAAM;gBACN;YACF;YACA,MAAM,MAAM,IAAI,iKAAK;YACvB,aAAa;YACb,IAAI,WAAW,CAAC;YAChB,IAAI,IAAI,CAAC,qBAAqB,IAAI;YAClC,IAAI,WAAW,CAAC;YAChB,IAAI,IAAI,CAAC,AAAC,WAAsC,OAA5B,KAAK,UAAU,CAAC,IAAI,IAAI,MAAQ,IAAI;YACxD,IAAI,IAAI,CAAC,AAAC,cAAmD,OAAtC,KAAK,UAAU,CAAC,cAAc,IAAI,MAAQ,IAAI;YACvE,MAAM,SAAQ,oCAAA,KAAK,UAAU,CAAC,gBAAgB,cAAhC,yDAAA,qCAAA,iCAAkC,CAAC,EAAE,cAArC,yDAAA,mCAAuC,KAAK;YACxD,IAAI,IAAI,CAAC,AAAC,UAAiC,OAAxB,CAAA,kBAAA,4BAAA,MAAO,MAAM,KAAI,KAAI,KAAwB,OAArB,CAAA,kBAAA,4BAAA,MAAO,OAAO,KAAI,KAAO,IAAI;YACxE,IAAI,IAAI,CAAC,AAAC,SAAmC,OAA3B,CAAA,kBAAA,6BAAA,cAAA,MAAO,IAAI,cAAX,kCAAA,YAAa,MAAM,KAAI,MAAQ,IAAI;YACrD,IAAI,IAAI,CAAC,AAAC,UAAqC,OAA5B,CAAA,kBAAA,6BAAA,eAAA,MAAO,KAAK,cAAZ,mCAAA,aAAc,MAAM,KAAI,MAAQ,IAAI;YACzD,iBAAiB;YACf,IAAI,IAAI,CAAC,WAAW,IAAI;YACxB,IAAI,IAAI,CAAC,WAAW,IAAI;YACxB,IAAI,IAAI,CAAC,QAAQ,KAAK;YACtB,IAAI,IAAI;YACR,KAAK,KAAK,CAAC,OAAO,CAAC,CAAC;gBAClB,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,MAAM,EAAE,IAAI;gBAC/B,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,MAAM,EAAE,IAAI;gBAC/B,IAAI,IAAI,CAAC,OAAO,EAAE,KAAK,GAAG,KAAK;gBAC/B,KAAK;YACP;YACA,IAAI,IAAI,CAAC;YACT,WAAW;QACX,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,uBAAuB;YACrC,WAAW;YACX,MAAM;QACR;IACF;IAEA,qBACE,6LAAC,gJAAM;QAAC,SAAQ;QAAU,SAAS;QAAY,UAAU;kBAAU,UAAU,qBAAqB;;;;;;AAEtG;GAxDwB;;QAEL,4IAAO;;;KAFF","debugId":null}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/styles/estudiante-dashboard.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"estudiante-dashboard-module__weNdnq__active\",\n  \"avatar\": \"estudiante-dashboard-module__weNdnq__avatar\",\n  \"boletinBtnContainer\": \"estudiante-dashboard-module__weNdnq__boletinBtnContainer\",\n  \"card\": \"estudiante-dashboard-module__weNdnq__card\",\n  \"cardCol\": \"estudiante-dashboard-module__weNdnq__cardCol\",\n  \"classItem\": \"estudiante-dashboard-module__weNdnq__classItem\",\n  \"classList\": \"estudiante-dashboard-module__weNdnq__classList\",\n  \"classSub\": \"estudiante-dashboard-module__weNdnq__classSub\",\n  \"classTime\": \"estudiante-dashboard-module__weNdnq__classTime\",\n  \"classTitle\": \"estudiante-dashboard-module__weNdnq__classTitle\",\n  \"contentRow\": \"estudiante-dashboard-module__weNdnq__contentRow\",\n  \"dashboardContainer\": \"estudiante-dashboard-module__weNdnq__dashboardContainer\",\n  \"dashboardTitle\": \"estudiante-dashboard-module__weNdnq__dashboardTitle\",\n  \"header\": \"estudiante-dashboard-module__weNdnq__header\",\n  \"headerActions\": \"estudiante-dashboard-module__weNdnq__headerActions\",\n  \"headerRow\": \"estudiante-dashboard-module__weNdnq__headerRow\",\n  \"headerTitle\": \"estudiante-dashboard-module__weNdnq__headerTitle\",\n  \"leftCol\": \"estudiante-dashboard-module__weNdnq__leftCol\",\n  \"loadingContainer\": \"estudiante-dashboard-module__weNdnq__loadingContainer\",\n  \"logoutBtn\": \"estudiante-dashboard-module__weNdnq__logoutBtn\",\n  \"main\": \"estudiante-dashboard-module__weNdnq__main\",\n  \"moduleBox\": \"estudiante-dashboard-module__weNdnq__moduleBox\",\n  \"moduleDesc\": \"estudiante-dashboard-module__weNdnq__moduleDesc\",\n  \"moduleTitle\": \"estudiante-dashboard-module__weNdnq__moduleTitle\",\n  \"modulesRow\": \"estudiante-dashboard-module__weNdnq__modulesRow\",\n  \"name\": \"estudiante-dashboard-module__weNdnq__name\",\n  \"nav\": \"estudiante-dashboard-module__weNdnq__nav\",\n  \"navItem\": \"estudiante-dashboard-module__weNdnq__navItem\",\n  \"notiIcon\": \"estudiante-dashboard-module__weNdnq__notiIcon\",\n  \"notiItem\": \"estudiante-dashboard-module__weNdnq__notiItem\",\n  \"notiSub\": \"estudiante-dashboard-module__weNdnq__notiSub\",\n  \"notiTitle\": \"estudiante-dashboard-module__weNdnq__notiTitle\",\n  \"notis\": \"estudiante-dashboard-module__weNdnq__notis\",\n  \"profile\": \"estudiante-dashboard-module__weNdnq__profile\",\n  \"rightCol\": \"estudiante-dashboard-module__weNdnq__rightCol\",\n  \"role\": \"estudiante-dashboard-module__weNdnq__role\",\n  \"sidebar\": \"estudiante-dashboard-module__weNdnq__sidebar\",\n  \"subtitle\": \"estudiante-dashboard-module__weNdnq__subtitle\",\n  \"taskDue\": \"estudiante-dashboard-module__weNdnq__taskDue\",\n  \"taskIcon\": \"estudiante-dashboard-module__weNdnq__taskIcon\",\n  \"taskItem\": \"estudiante-dashboard-module__weNdnq__taskItem\",\n  \"taskList\": \"estudiante-dashboard-module__weNdnq__taskList\",\n  \"taskSub\": \"estudiante-dashboard-module__weNdnq__taskSub\",\n  \"taskTitle\": \"estudiante-dashboard-module__weNdnq__taskTitle\",\n  \"wrapper\": \"estudiante-dashboard-module__weNdnq__wrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/ui/LoadingModal.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"overlay\": \"LoadingModal-module__WP8uBG__overlay\",\n  \"panel\": \"LoadingModal-module__WP8uBG__panel\",\n  \"srOnly\": \"LoadingModal-module__WP8uBG__srOnly\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/ui/Loading.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"loadingRoot\": \"Loading-module__2aO0xG__loadingRoot\",\n  \"spin\": \"Loading-module__2aO0xG__spin\",\n  \"spinner\": \"Loading-module__2aO0xG__spinner\",\n  \"text\": \"Loading-module__2aO0xG__text\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ui/Loading.tsx"],"sourcesContent":["import React from 'react';\r\nimport styles from './Loading.module.css';\r\n\r\ninterface Props { message?: string }\r\n\r\nexport default function Loading({ message = 'Cargando...' }: Props) {\r\n  return (\r\n    <div className={styles.loadingRoot}>\r\n      <div className={styles.spinner} aria-hidden=\"true\" />\r\n      <div className={styles.text}>{message}</div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAIe,SAAS,QAAQ,KAAkC;QAAlC,EAAE,UAAU,aAAa,EAAS,GAAlC;IAC9B,qBACE,6LAAC;QAAI,WAAW,4JAAM,CAAC,WAAW;;0BAChC,6LAAC;gBAAI,WAAW,4JAAM,CAAC,OAAO;gBAAE,eAAY;;;;;;0BAC5C,6LAAC;gBAAI,WAAW,4JAAM,CAAC,IAAI;0BAAG;;;;;;;;;;;;AAGpC;KAPwB","debugId":null}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ui/LoadingModal.tsx"],"sourcesContent":["import React from 'react';\r\nimport styles from './LoadingModal.module.css';\r\nimport Loading from './Loading';\r\n\r\ninterface Props { open: boolean; message?: string }\r\n\r\nexport default function LoadingModal({ open, message = 'Cargando...' }: Props) {\r\n  if (!open) return null;\r\n  return (\r\n    <div className={styles.overlay} role=\"status\" aria-live=\"polite\">\r\n      <div className={styles.panel}>\r\n        <Loading message={message} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAIe,SAAS,aAAa,KAAwC;QAAxC,EAAE,IAAI,EAAE,UAAU,aAAa,EAAS,GAAxC;IACnC,IAAI,CAAC,MAAM,OAAO;IAClB,qBACE,6LAAC;QAAI,WAAW,iKAAM,CAAC,OAAO;QAAE,MAAK;QAAS,aAAU;kBACtD,cAAA,6LAAC;YAAI,WAAW,iKAAM,CAAC,KAAK;sBAC1B,cAAA,6LAAC,iJAAO;gBAAC,SAAS;;;;;;;;;;;;;;;;AAI1B;KATwB","debugId":null}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/hooks/useDelayedOpen.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\n\r\n// Hook que abre con delay para evitar parpadeos en cargas rápidas\r\nexport default function useDelayedOpen(open: boolean, delay = 250) {\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let t: any;\r\n    if (open) {\r\n      t = setTimeout(() => setVisible(true), delay);\r\n    } else {\r\n      // si se cierra rápidamente, esconder inmediatamente\r\n      setVisible(false);\r\n    }\r\n    return () => clearTimeout(t);\r\n  }, [open, delay]);\r\n\r\n  return visible;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;AAGe,SAAS,eAAe,IAAa;QAAE,QAAA,iEAAQ;;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;oCAAC;YACR,IAAI;YACJ,IAAI,MAAM;gBACR,IAAI;gDAAW,IAAM,WAAW;+CAAO;YACzC,OAAO;gBACL,oDAAoD;gBACpD,WAAW;YACb;YACA;4CAAO,IAAM,aAAa;;QAC5B;mCAAG;QAAC;QAAM;KAAM;IAEhB,OAAO;AACT;GAfwB","debugId":null}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/app/estudiante/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport BoletinPDF from \"./boletin/BoletinPDF\";\r\nimport { useAuth } from \"../../context/authContext\";\r\nimport styles from \"../../styles/estudiante-dashboard.module.css\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport Button from '../../components/ui/Button';\r\nimport LoadingModal from '../../components/ui/LoadingModal';\r\nimport useDelayedOpen from '../../hooks/useDelayedOpen';\r\n\r\nexport default function EstudianteDashboard() {\r\n  const { user, loading, logout } = useAuth();\r\n  const router = useRouter();\r\n  const [cicloId] = useState(1);\r\n  const [horario, setHorario] = useState<Array<any>>([]);\r\n  const [notas, setNotas] = useState<Array<any>>([]);\r\n  const [asignaturas, setAsignaturas] = useState<Array<string>>([]);\r\n  const [loadingData, setLoadingData] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const delayedOpen = useDelayedOpen(loading);\r\n  const delayedDataOpen = useDelayedOpen(loadingData);\r\n  \r\n  useEffect(() => {\r\n    // Cuando el usuario esté disponible, traemos horario y notas\r\n    const fetchData = async () => {\r\n      if (!user) return;\r\n      setLoadingData(true);\r\n      setError(null);\r\n      try {\r\n        const token = await user.getIdToken();\r\n        const headers = { Authorization: `Bearer ${token}` };\r\n\r\n        // Traer horario\r\n        const hRes = await fetch('/api/estudiante/horario', { headers });\r\n        if (!hRes.ok) throw new Error('Error al obtener horario');\r\n        const hData = await hRes.json() as any[];\r\n        setHorario(Array.isArray(hData) ? hData : []);\r\n\r\n        // Traer notas\r\n        const nRes = await fetch('/api/estudiante/notas', { headers });\r\n        if (!nRes.ok) throw new Error('Error al obtener notas');\r\n        const nData = await nRes.json() as any[];\r\n        setNotas(Array.isArray(nData) ? nData : []);\r\n\r\n        // Derivar asignaturas: tomar de horario primero, si no, de notas\r\n        const materiasFromHorario = Array.from(new Set((hData || []).map((h: any) => String(h.materia)))) as string[];\r\n        if (materiasFromHorario.length) {\r\n          setAsignaturas(materiasFromHorario as string[]);\r\n        } else {\r\n          const materiasFromNotas = Array.from(new Set((nData || []).map((n: any) => n.materia?.nombre).filter(Boolean)));\r\n          setAsignaturas(materiasFromNotas as string[]);\r\n        }\r\n\r\n      } catch (err: any) {\r\n        console.error(err);\r\n        setError(err.message || 'Error cargando datos');\r\n      } finally {\r\n        setLoadingData(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [user]);\r\n\r\n  if (loading) return <div className={styles.loadingContainer}><LoadingModal open={delayedOpen} message=\"Cargando...\" /></div>;\r\n  if (!user) return <div className={styles.loadingContainer}><h2>Bienvenido a AulaUnida</h2><p>Por favor inicia sesión.</p></div>;\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <aside className={styles.sidebar}>\r\n        <div className={styles.profile}>\r\n          <img src=\"/default-avatar.png\" alt=\"avatar\" className={styles.avatar} />\r\n          <div>\r\n            <div className={styles.name}>{user.displayName || user.email}</div>\r\n            <div className={styles.role}>Estudiante</div>\r\n          </div>\r\n        </div>\r\n        <nav className={styles.nav}>\r\n          <Link href=\"/estudiante\" className={styles.navItem + ' ' + styles.active}>Inicio</Link>\r\n          <Link href=\"/estudiante/asignaturas\" className={styles.navItem}>Asignaturas</Link>\r\n          <Link href=\"/estudiante/notas\" className={styles.navItem}>Notas y Asistencia</Link>\r\n          <Link href=\"/estudiante/boletin\" className={styles.navItem}>Boletín</Link>\r\n          {/* Anuncios eliminados según solicitud del usuario */}\r\n        </nav>\r\n      </aside>\r\n\r\n      <main className={styles.main}>\r\n        <header className={styles.header}>\r\n          <div className={styles.headerRow}>\r\n            <div>\r\n              <h1 className={styles.headerTitle}>Panel de Estudiante</h1>\r\n              <p className={styles.subtitle}>Bienvenida de nuevo, {user.displayName?.split(' ')[0] || 'estudiante'}.</p>\r\n            </div>\r\n            <div className={styles.headerActions}>\r\n              <Button variant=\"ghost\" onClick={async () => { await logout(); router.push('/login'); }}>\r\n                Cerrar sesión\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <section className={styles.contentRow}>\r\n          <div className={styles.leftCol}>\r\n            <div className={styles.card}>\r\n              <h3>Mis Asignaturas</h3>\r\n              <div className={styles.taskList}>\r\n                {/* global modal for data loading shown below */}\r\n                {!loadingData && asignaturas.length === 0 && <div>No hay asignaturas disponibles</div>}\r\n                {!loadingData && asignaturas.map((a, i) => (\r\n                  <div key={i} className={styles.taskItem}>\r\n                    <div className={styles.taskIcon}>�</div>\r\n                    <div style={{flex:1}}>\r\n                      <div className={styles.taskTitle}>{a}</div>\r\n                    </div>\r\n                    <div style={{color:'#666'}}></div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className={styles.card} style={{marginTop: 18}}>\r\n              <h3>Próximas Clases</h3>\r\n              <div className={styles.classList}>\r\n                {/* loading modal covers data loads */}\r\n                {!loadingData && horario.length === 0 && <div>No hay clases próximamente</div>}\r\n                {!loadingData && horario.map((h, i) => (\r\n                  <div key={i} className={styles.classItem}>\r\n                    <div>\r\n                      <div className={styles.classTitle}>{h.materia}</div>\r\n                      <div className={styles.classSub}>{h.aula}</div>\r\n                    </div>\r\n                    <div className={styles.classTime}>{h.hora}</div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <aside className={styles.rightCol}>\r\n            <div className={styles.cardCol}>\r\n              <h3>Resumen de Notas</h3>\r\n              <div className={styles.notis}>\r\n                {/* loading modal covers data loads */}\r\n                {!loadingData && notas.length === 0 && <div>No hay notas para mostrar</div>}\r\n                {!loadingData && notas.length > 0 && (\r\n                  <div>\r\n                    {/* Agrupar por materia y calcular promedio */}\r\n                    {Object.entries(notas.reduce((acc: any, cur: any) => {\r\n                      const nombre = cur.materia?.nombre || 'Sin materia';\r\n                      if (!acc[nombre]) acc[nombre] = { suma: 0, cantidad: 0 };\r\n                      acc[nombre].suma += cur.valor || 0;\r\n                      acc[nombre].cantidad += 1;\r\n                      return acc;\r\n                    }, {})).map(([mat, val]: any, i) => (\r\n                      <div key={i} className={styles.notiItem} style={{padding: '8px 0'}}>\r\n                        <div>\r\n                          <div className={styles.notiTitle}>{mat}</div>\r\n                          <div className={styles.notiSub}>Promedio: {(val.suma / val.cantidad).toFixed(2)} ({val.cantidad} notas)</div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div style={{marginTop: 12}}>\r\n                <BoletinPDF cicloId={cicloId} />\r\n              </div>\r\n              {error && <div style={{color:'red', marginTop:8}}>{error}</div>}\r\n            </div>\r\n          </aside>\r\n        </section>\r\n        {/* centralized loading modal for data fetches */}\r\n        <LoadingModal open={delayedDataOpen} message=\"Cargando datos...\" />\r\n      </main>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}