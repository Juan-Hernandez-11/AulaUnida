{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/styles/admin-horarios.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"fadeInBlock\": \"admin-horarios-module__y66LRG__fadeInBlock\",\n  \"horarioCell\": \"admin-horarios-module__y66LRG__horarioCell\",\n  \"horarioCellDroppable\": \"admin-horarios-module__y66LRG__horarioCellDroppable\",\n  \"horarioContainer\": \"admin-horarios-module__y66LRG__horarioContainer\",\n  \"horarioGrid\": \"admin-horarios-module__y66LRG__horarioGrid\",\n  \"horarioHeader\": \"admin-horarios-module__y66LRG__horarioHeader\",\n  \"horarioMateria\": \"admin-horarios-module__y66LRG__horarioMateria\",\n  \"horarioRowLabel\": \"admin-horarios-module__y66LRG__horarioRowLabel\",\n  \"materiaDraggable\": \"admin-horarios-module__y66LRG__materiaDraggable\",\n  \"removeBtn\": \"admin-horarios-module__y66LRG__removeBtn\",\n  \"selectModern\": \"admin-horarios-module__y66LRG__selectModern\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/app/docente/notas/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useAuth } from '../../../context/authContext';\r\nimport styles from '../../../styles/admin-horarios.module.css';\r\n\r\nexport default function DocenteNotasPage() {\r\n  const [asignaciones, setAsignaciones] = useState<any[]>([]);\r\n  const { user } = useAuth();\r\n  const [selected, setSelected] = useState<{gradoId:number, materiaId:number, cicloId:number}|null>(null);\r\n  const [estudiantes, setEstudiantes] = useState<any[]>([]);\r\n  const [periodos, setPeriodos] = useState<any[]>([]);\r\n  const [periodoId, setPeriodoId] = useState<number|null>(null);\r\n  const [notas, setNotas] = useState<{[estudianteId:number]: number}>({});\r\n  const [saving, setSaving] = useState(false);\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  // Cargar asignaciones del docente\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    user.getIdToken().then(idToken => {\r\n      fetch(\"/api/docente/asignaciones\", {\r\n        headers: {\r\n          Authorization: `Bearer ${idToken}`,\r\n        },\r\n      })\r\n        .then(r => r.json())\r\n        .then(data => {\r\n          setAsignaciones(Array.isArray(data) ? data : []);\r\n        });\r\n    });\r\n  }, [user]);\r\n\r\n  // Cargar estudiantes y periodos al seleccionar grupo/materia\r\n  useEffect(() => {\r\n    if (selected) {\r\n      fetch(`/api/docente/estudiantes?gradoId=${selected.gradoId}&materiaId=${selected.materiaId}`)\r\n        .then(r => r.json()).then(setEstudiantes);\r\n      fetch(`/api/admin/periodos?cicloId=${selected.cicloId}`)\r\n        .then(r => r.json()).then(setPeriodos);\r\n    } else {\r\n      setEstudiantes([]);\r\n      setPeriodos([]);\r\n    }\r\n  }, [selected]);\r\n\r\n  // Handler para seleccionar grupo/materia\r\n  const handleSelect = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const idx = Number(e.target.value);\r\n    if (idx >= 0) {\r\n      const a = asignaciones[idx];\r\n      setSelected({ gradoId: a.gradoId, materiaId: a.materiaId, cicloId: a.cicloId });\r\n      setNotas({});\r\n      setPeriodoId(null);\r\n    }\r\n  };\r\n\r\n  // Handler para cambiar nota\r\n  const handleNota = (estudianteId: number, valor: number) => {\r\n    setNotas(prev => ({ ...prev, [estudianteId]: valor }));\r\n  };\r\n\r\n  // Guardar notas\r\n  const handleGuardar = async () => {\r\n    if (!selected || !periodoId) return;\r\n    setSaving(true);\r\n    setMsg(\"\");\r\n    const notasArr = Object.entries(notas).map(([estudianteId, valor]) => ({ estudianteId: Number(estudianteId), valor: Number(valor) }));\r\n    const res = await fetch(\"/api/docente/notas\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        gradoId: selected.gradoId,\r\n        materiaId: selected.materiaId,\r\n        periodoId,\r\n        notas: notasArr\r\n      })\r\n    });\r\n    if (res.ok) setMsg(\"Notas guardadas correctamente\");\r\n    else setMsg(\"Error al guardar notas\");\r\n    setSaving(false);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.horarioContainer} style={{ maxWidth: 900, margin: '40px auto' }}>\r\n      <h2 style={{ fontWeight: 700, fontSize: 26, marginBottom: 24, color: '#fff' }}>Asignaci√≥n de Notas</h2>\r\n      <div style={{ display: 'flex', gap: 16, marginBottom: 24 }}>\r\n        <select className={styles.selectModern} onChange={handleSelect} defaultValue={-1}>\r\n          <option value={-1}>Selecciona grupo y materia</option>\r\n          {Array.isArray(asignaciones) && asignaciones.length > 0 && asignaciones.map((a, i) => (\r\n            <option key={i} value={i}>{a.grado.nombre} {a.grado.seccion} - {a.materia.nombre} ({a.ciclo.nombre})</option>\r\n          ))}\r\n          {Array.isArray(asignaciones) && asignaciones.length === 0 && (\r\n            <option disabled value={-1}>No tienes asignaciones disponibles</option>\r\n          )}\r\n        </select>\r\n        <select className={styles.selectModern} value={periodoId || ''} onChange={e => setPeriodoId(Number(e.target.value))}>\r\n          <option value=''>Selecciona periodo</option>\r\n          {periodos.map((p: any) => (\r\n            <option key={p.id} value={p.id}>{p.nombre}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      {estudiantes.length > 0 && periodoId && (\r\n        <table className={styles.horarioGrid} style={{ marginTop: 18 }}>\r\n          <thead>\r\n            <tr>\r\n              <th className={styles.horarioHeader}>Estudiante</th>\r\n              <th className={styles.horarioHeader}>Nota</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {estudiantes.map((e: any) => (\r\n              <tr key={e.id}>\r\n                <td className={styles.horarioRowLabel} style={{ textAlign: 'left', fontWeight: 500 }}>{e.nombres} {e.apellidos}</td>\r\n                <td className={styles.horarioCell}>\r\n                  <input\r\n                    type=\"number\"\r\n                    min={0}\r\n                    max={100}\r\n                    value={notas[e.id] ?? ''}\r\n                    onChange={ev => handleNota(e.id, Number(ev.target.value))}\r\n                    style={{\r\n                      width: 80,\r\n                      padding: '7px 10px',\r\n                      borderRadius: 7,\r\n                      border: '2px solid #2563eb',\r\n                      background: '#181A1B',\r\n                      color: '#fff',\r\n                      fontWeight: 600,\r\n                      fontSize: 15,\r\n                      outline: 'none',\r\n                      boxShadow: '0 2px 8px #0002',\r\n                    }}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n      <div style={{ display: 'flex', gap: 16, marginTop: 28 }}>\r\n        <button\r\n          onClick={handleGuardar}\r\n          disabled={saving || !periodoId || estudiantes.length === 0}\r\n          style={{\r\n            background: '#2563eb',\r\n            color: '#fff',\r\n            border: '2px solid #1d4ed8',\r\n            borderRadius: 8,\r\n            padding: '10px 32px',\r\n            fontWeight: 700,\r\n            fontSize: 17,\r\n            boxShadow: '0 2px 8px #2563eb44',\r\n            cursor: saving ? 'not-allowed' : 'pointer',\r\n            opacity: saving ? 0.7 : 1,\r\n            marginTop: 8\r\n          }}\r\n        >{saving ? 'Guardando...' : 'Guardar Notas'}</button>\r\n        {msg && <span style={{ color: msg.startsWith('Error') ? '#dc2626' : '#22c55e', fontWeight: 600, fontSize: 16 }}>{msg}</span>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}