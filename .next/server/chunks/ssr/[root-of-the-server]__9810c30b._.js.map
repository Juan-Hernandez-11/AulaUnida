{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/ui/LoadingModal.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"overlay\": \"LoadingModal-module__WP8uBG__overlay\",\n  \"panel\": \"LoadingModal-module__WP8uBG__panel\",\n  \"srOnly\": \"LoadingModal-module__WP8uBG__srOnly\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 11, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/ui/Loading.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"loadingRoot\": \"Loading-module__2aO0xG__loadingRoot\",\n  \"spin\": \"Loading-module__2aO0xG__spin\",\n  \"spinner\": \"Loading-module__2aO0xG__spinner\",\n  \"text\": \"Loading-module__2aO0xG__text\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ui/Loading.tsx"],"sourcesContent":["import React from 'react';\r\nimport styles from './Loading.module.css';\r\n\r\ninterface Props { message?: string }\r\n\r\nexport default function Loading({ message = 'Cargando...' }: Props) {\r\n  return (\r\n    <div className={styles.loadingRoot}>\r\n      <div className={styles.spinner} aria-hidden=\"true\" />\r\n      <div className={styles.text}>{message}</div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAIe,SAAS,QAAQ,EAAE,UAAU,aAAa,EAAS;IAChE,qBACE,8OAAC;QAAI,WAAW,yJAAM,CAAC,WAAW;;0BAChC,8OAAC;gBAAI,WAAW,yJAAM,CAAC,OAAO;gBAAE,eAAY;;;;;;0BAC5C,8OAAC;gBAAI,WAAW,yJAAM,CAAC,IAAI;0BAAG;;;;;;;;;;;;AAGpC","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ui/LoadingModal.tsx"],"sourcesContent":["import React from 'react';\r\nimport styles from './LoadingModal.module.css';\r\nimport Loading from './Loading';\r\n\r\ninterface Props { open: boolean; message?: string }\r\n\r\nexport default function LoadingModal({ open, message = 'Cargando...' }: Props) {\r\n  if (!open) return null;\r\n  return (\r\n    <div className={styles.overlay} role=\"status\" aria-live=\"polite\">\r\n      <div className={styles.panel}>\r\n        <Loading message={message} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAIe,SAAS,aAAa,EAAE,IAAI,EAAE,UAAU,aAAa,EAAS;IAC3E,IAAI,CAAC,MAAM,OAAO;IAClB,qBACE,8OAAC;QAAI,WAAW,8JAAM,CAAC,OAAO;QAAE,MAAK;QAAS,aAAU;kBACtD,cAAA,8OAAC;YAAI,WAAW,8JAAM,CAAC,KAAK;sBAC1B,cAAA,8OAAC,8IAAO;gBAAC,SAAS;;;;;;;;;;;;;;;;AAI1B","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/hooks/useDelayedOpen.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\n\r\n// Hook que abre con delay para evitar parpadeos en cargas rápidas\r\nexport default function useDelayedOpen(open: boolean, delay = 250) {\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let t: any;\r\n    if (open) {\r\n      t = setTimeout(() => setVisible(true), delay);\r\n    } else {\r\n      // si se cierra rápidamente, esconder inmediatamente\r\n      setVisible(false);\r\n    }\r\n    return () => clearTimeout(t);\r\n  }, [open, delay]);\r\n\r\n  return visible;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAGe,SAAS,eAAe,IAAa,EAAE,QAAQ,GAAG;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,IAAI;QACJ,IAAI,MAAM;YACR,IAAI,WAAW,IAAM,WAAW,OAAO;QACzC,OAAO;YACL,oDAAoD;YACpD,WAAW;QACb;QACA,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;QAAM;KAAM;IAEhB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/hooks/useUserRole.ts"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/authContext';\r\n\r\n// Hook para obtener el rol del usuario desde la API interna (PostgreSQL)\r\nexport function useUserRole() {\r\n  const { user } = useAuth();\r\n  const [role, setRole] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setRole(null);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    // Llama a tu API interna para obtener el rol por UID de Firebase\r\n    const fetchRole = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(`/api/user-role?uid=${user.uid}`);\r\n        const data = await res.json();\r\n        setRole(data.role || null);\r\n      } catch (err) {\r\n        setRole(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchRole();\r\n  }, [user]);\r\n\r\n  return { role, loading };\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;AAKO,SAAS;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,yIAAO;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAgB;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM;YACT,QAAQ;YACR,WAAW;YACX;QACF;QACA,iEAAiE;QACjE,MAAM,YAAY;YAChB,WAAW;YACX,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,CAAC,mBAAmB,EAAE,KAAK,GAAG,EAAE;gBACxD,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,QAAQ,KAAK,IAAI,IAAI;YACvB,EAAE,OAAO,KAAK;gBACZ,QAAQ;YACV,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG;QAAC;KAAK;IAET,OAAO;QAAE;QAAM;IAAQ;AACzB","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react';\r\nimport { useAuth } from '../context/authContext';\r\nimport { useUserRole } from '../hooks/useUserRole';\r\nimport Loading from './ui/Loading';\r\nimport LoadingModal from './ui/LoadingModal';\r\n\r\n// Componente para proteger rutas según autenticación y rol\r\nexport default function ProtectedRoute({ children, allowedRoles }: { children: React.ReactNode, allowedRoles?: string[] }) {\r\n  const { user, loading: authLoading } = useAuth();\r\n  const { role, loading: roleLoading } = useUserRole();\r\n\r\n  if (authLoading || roleLoading) return <LoadingModal open={true} message=\"Cargando...\" />;\r\n  if (!user) {\r\n    if (typeof window !== 'undefined') {\r\n      window.location.href = '/login';\r\n    }\r\n    return null;\r\n  }\r\n\r\n  if (allowedRoles && (!role || !allowedRoles.includes(role))) {\r\n    return <div>No tienes permiso para acceder a esta página.</div>;\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAQe,SAAS,eAAe,EAAE,QAAQ,EAAE,YAAY,EAA0D;IACvH,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,GAAG,IAAA,yIAAO;IAC9C,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,GAAG,IAAA,0IAAW;IAElD,IAAI,eAAe,aAAa,qBAAO,8OAAC,mJAAY;QAAC,MAAM;QAAM,SAAQ;;;;;;IACzE,IAAI,CAAC,MAAM;QACT;;QAGA,OAAO;IACT;IAEA,IAAI,gBAAgB,CAAC,CAAC,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,GAAG;QAC3D,qBAAO,8OAAC;sBAAI;;;;;;IACd;IAEA,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/styles/admin-dashboard.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"activityAction\": \"admin-dashboard-module__5BnUYq__activityAction\",\n  \"activityCard\": \"admin-dashboard-module__5BnUYq__activityCard\",\n  \"activityDate\": \"admin-dashboard-module__5BnUYq__activityDate\",\n  \"activityTable\": \"admin-dashboard-module__5BnUYq__activityTable\",\n  \"activityTitle\": \"admin-dashboard-module__5BnUYq__activityTitle\",\n  \"activityUser\": \"admin-dashboard-module__5BnUYq__activityUser\",\n  \"avatar\": \"admin-dashboard-module__5BnUYq__avatar\",\n  \"card\": \"admin-dashboard-module__5BnUYq__card\",\n  \"dashboardContainer\": \"admin-dashboard-module__5BnUYq__dashboardContainer\",\n  \"logo\": \"admin-dashboard-module__5BnUYq__logo\",\n  \"logoutBtn\": \"admin-dashboard-module__5BnUYq__logoutBtn\",\n  \"mainContent\": \"admin-dashboard-module__5BnUYq__mainContent\",\n  \"menu\": \"admin-dashboard-module__5BnUYq__menu\",\n  \"menuItem\": \"admin-dashboard-module__5BnUYq__menuItem\",\n  \"menuItemActive\": \"admin-dashboard-module__5BnUYq__menuItemActive\",\n  \"metricCard\": \"admin-dashboard-module__5BnUYq__metricCard\",\n  \"metricLabel\": \"admin-dashboard-module__5BnUYq__metricLabel\",\n  \"metricValue\": \"admin-dashboard-module__5BnUYq__metricValue\",\n  \"metricsGrid\": \"admin-dashboard-module__5BnUYq__metricsGrid\",\n  \"primaryBtn\": \"admin-dashboard-module__5BnUYq__primaryBtn\",\n  \"quickAccessBtn\": \"admin-dashboard-module__5BnUYq__quickAccessBtn\",\n  \"quickAccessCard\": \"admin-dashboard-module__5BnUYq__quickAccessCard\",\n  \"sidebar\": \"admin-dashboard-module__5BnUYq__sidebar\",\n  \"spin\": \"admin-dashboard-module__5BnUYq__spin\",\n  \"subtitle\": \"admin-dashboard-module__5BnUYq__subtitle\",\n  \"title\": \"admin-dashboard-module__5BnUYq__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/styles/admin-asignaturas-form.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"buttonBox\": \"admin-asignaturas-form-module__EAFHQG__buttonBox\",\n  \"error\": \"admin-asignaturas-form-module__EAFHQG__error\",\n  \"field\": \"admin-asignaturas-form-module__EAFHQG__field\",\n  \"formBox\": \"admin-asignaturas-form-module__EAFHQG__formBox\",\n  \"input\": \"admin-asignaturas-form-module__EAFHQG__input\",\n  \"label\": \"admin-asignaturas-form-module__EAFHQG__label\",\n  \"saveButton\": \"admin-asignaturas-form-module__EAFHQG__saveButton\",\n  \"select\": \"admin-asignaturas-form-module__EAFHQG__select\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/NextLink.tsx"],"sourcesContent":["import Link from 'next/link';\r\n\r\nexport default Link;"],"names":[],"mappings":";;;;AAAA;;uCAEe,uKAAI","debugId":null}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/ui/Button.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"ghost\": \"Button-module__8RiFmG__ghost\",\n  \"icon\": \"Button-module__8RiFmG__icon\",\n  \"primary\": \"Button-module__8RiFmG__primary\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/components/ui/Button.tsx"],"sourcesContent":["import React from 'react';\r\nimport styles from './Button.module.css';\r\n\r\ntype Props = React.ButtonHTMLAttributes<HTMLButtonElement> & {\r\n  variant?: 'primary' | 'ghost';\r\n  icon?: React.ReactNode;\r\n};\r\n\r\nexport default function Button({ variant = 'primary', icon, children, className, ...rest }: Props) {\r\n  const cls = `${variant === 'primary' ? styles.primary : styles.ghost} ${className || ''}`.trim();\r\n  return (\r\n    <button {...rest} className={cls}>\r\n      {icon && <span className={styles.icon}>{icon}</span>}\r\n      <span>{children}</span>\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAOe,SAAS,OAAO,EAAE,UAAU,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,MAAa;IAC/F,MAAM,MAAM,GAAG,YAAY,YAAY,wJAAM,CAAC,OAAO,GAAG,wJAAM,CAAC,KAAK,CAAC,CAAC,EAAE,aAAa,IAAI,CAAC,IAAI;IAC9F,qBACE,8OAAC;QAAQ,GAAG,IAAI;QAAE,WAAW;;YAC1B,sBAAQ,8OAAC;gBAAK,WAAW,wJAAM,CAAC,IAAI;0BAAG;;;;;;0BACxC,8OAAC;0BAAM;;;;;;;;;;;;AAGb","debugId":null}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/juant/Documents/proyectoCUN/aulaunida/src/app/admin/asignaturas/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, ChangeEvent, FormEvent, useEffect, useRef } from 'react';\r\nimport LoadingModal from '../../../../src/components/ui/LoadingModal';\r\nimport useDelayedOpen from '../../../../src/hooks/useDelayedOpen';\r\nimport ProtectedRoute from '../../../components/ProtectedRoute';\r\nimport styles from '../../../styles/admin-dashboard.module.css';\r\nimport formStyles from '../../../styles/admin-asignaturas-form.module.css';\r\nimport { UserCircleIcon, AcademicCapIcon, ClipboardIcon, BookOpenIcon } from '@heroicons/react/24/outline';\r\nimport NextLink from '../../../components/NextLink';\r\nimport Button from '../../../components/ui/Button';\r\n\r\n// Botón de volver reutilizable\r\nfunction BackToDashboardButton() {\r\n  return (\r\n    <div style={{ marginBottom: 24 }}>\r\n  <NextLink href=\"/admin\" style={{ display: 'inline-flex', alignItems: 'center', gap: 8, color: 'var(--color-primary)', fontWeight: 500 }}>\r\n        <svg width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 19l-7-7 7-7\"/></svg>\r\n        Volver al Dashboard\r\n      </NextLink>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Tipos para grado, docente y asignatura (se mantienen igual)\r\ninterface Grado {\r\n  id: number;\r\n  nombre: string;\r\n  seccion: string;\r\n}\r\n\r\ninterface Asignacion {\r\n  gradoId: number;\r\n  docenteId: number;\r\n  periodoId?: number;\r\n}\r\ninterface Docente {\r\n  id: number;\r\n  name: string;\r\n}\r\ninterface Asignatura {\r\n  id: number;\r\n  nombre: string;\r\n  area: string;\r\n  codigo: string;\r\n  grados: Grado[];\r\n  docenteId?: number;\r\n  docente?: Docente;\r\n}\r\n\r\n// Sidebar links para navegación admin\r\nconst sidebarLinks = [\r\n  { label: 'Gestión de Usuarios', icon: UserCircleIcon, href: '/admin/usuarios' },\r\n  { label: 'Grados/Secciones', icon: AcademicCapIcon, href: '/admin/grados' },\r\n  { label: 'Asignaturas', icon: BookOpenIcon, href: '/admin/asignaturas', active: true },\r\n  { label: 'Matrícula', icon: ClipboardIcon, href: '/admin/matricula' },\r\n];\r\n\r\nexport default function AdminAsignaturasPage() {\r\n  // --- ESTADO Y LÓGICA PRINCIPAL (SE CONSERVAN TUS COMENTARIOS) ---\r\n  const [asignaturas, setAsignaturas] = useState<Asignatura[]>([]);\r\n  const [grados, setGrados] = useState<Grado[]>([]);\r\n  const [docentes, setDocentes] = useState<Docente[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const delayedOpen = useDelayedOpen(loading);\r\n  const [form, setForm] = useState<{ nombre: string; area: string; codigo: string; gradoIds: string[]; asignaciones: Asignacion[] }>({ nombre: '', area: '', codigo: '', gradoIds: [], asignaciones: [] });\r\n  const [editingId, setEditingId] = useState<number | null>(null);\r\n  const [creating, setCreating] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const tableRef = useRef<HTMLTableElement | null>(null);\r\n  const [lastCreatedId, setLastCreatedId] = useState<number | null>(null);\r\n  // Estado para errores de validación en tiempo real\r\n  const [fieldErrors, setFieldErrors] = useState<{ nombre?: string; area?: string; codigo?: string; gradoIds?: string }>({});\r\n\r\n  // Cargar docentes al montar el componente y después de crear/editar\r\n  const fetchDocentes = async () => {\r\n    try {\r\n      const res = await fetch('/api/admin/docentes');\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        if (Array.isArray(data)) setDocentes(data);\r\n      }\r\n    } catch {}\r\n  };\r\n\r\n  // Cargar asignaturas al montar y después de crear/editar\r\n  const fetchAsignaturas = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch('/api/admin/asignaturas');\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        if (Array.isArray(data)) setAsignaturas(data);\r\n      }\r\n    } catch {}\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDocentes();\r\n    fetchAsignaturas();\r\n  }, []);\r\n\r\n  // Validación en tiempo real\r\n  const validateField = (name: string, value: string) => {\r\n    let error = '';\r\n    if (name === 'nombre') {\r\n      if (!value.trim()) error = 'El nombre es obligatorio.';\r\n      else if (value.length < 2) error = 'Debe tener al menos 2 caracteres.';\r\n    }\r\n    if (name === 'area') {\r\n      if (!value.trim()) error = 'El área es obligatoria.';\r\n    }\r\n    if (name === 'codigo') {\r\n      if (!value.trim()) error = 'El código es obligatorio.';\r\n      else if (value.length < 2) error = 'Debe tener al menos 2 caracteres.';\r\n    }\r\n    if (name === 'gradoIds') {\r\n      if (!value.trim()) error = 'Debes seleccionar al menos un grado.';\r\n    }\r\n    return error;\r\n  };\r\n\r\n  const handleChange = (e: ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value, multiple, options } = e.target as HTMLSelectElement;\r\n    if (multiple) {\r\n      const values = Array.from(options).filter(o => o.selected).map(o => o.value);\r\n      setForm({ ...form, [name]: values });\r\n      setFieldErrors(prev => ({ ...prev, [name]: validateField(name, values.join(',')) }));\r\n    } else {\r\n      setForm({ ...form, [name]: value });\r\n      setFieldErrors(prev => ({ ...prev, [name]: validateField(name, value) }));\r\n    }\r\n  };\r\n\r\n  // Maneja el cambio de docente para un grado específico\r\n  const handleDocenteChange = (gradoId: number, docenteId: string) => {\r\n    setForm(prev => {\r\n      const asignaciones = prev.asignaciones.filter(a => a.gradoId !== gradoId);\r\n      if (docenteId) {\r\n        asignaciones.push({ gradoId, docenteId: Number(docenteId) });\r\n      }\r\n      return { ...prev, asignaciones };\r\n    });\r\n  };\r\n\r\n  // Función para asignar el mismo docente a todos los grados\r\n  const asignarMismoDocente = (docenteId: string) => {\r\n    if (!docenteId || form.gradoIds.length === 0) return;\r\n    \r\n    const nuevasAsignaciones = form.gradoIds.map(gradoId => ({\r\n      gradoId: Number(gradoId),\r\n      docenteId: Number(docenteId)\r\n    }));\r\n    \r\n    setForm(prev => ({ ...prev, asignaciones: nuevasAsignaciones }));\r\n  };\r\n\r\n  const handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setCreating(true);\r\n    setError('');\r\n    // Validación global antes de enviar\r\n    const newErrors: typeof fieldErrors = {\r\n      nombre: validateField('nombre', form.nombre),\r\n      area: validateField('area', form.area),\r\n      codigo: validateField('codigo', form.codigo),\r\n      gradoIds: validateField('gradoIds', form.gradoIds.join(',')),\r\n    };\r\n    setFieldErrors(newErrors);\r\n    if (newErrors.nombre || newErrors.area || newErrors.codigo || newErrors.gradoIds) {\r\n      setError('Por favor corrige los errores antes de guardar.');\r\n      setCreating(false);\r\n      return;\r\n    }\r\n    try {\r\n      const payload = {\r\n        nombre: form.nombre,\r\n        area: form.area,\r\n        codigo: form.codigo,\r\n        gradoIds: form.gradoIds.map(Number),\r\n        asignaciones: form.asignaciones\r\n      };\r\n      if (editingId) {\r\n        const res = await fetch('/api/admin/asignaturas', {\r\n          method: 'PUT',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ id: editingId, ...payload }),\r\n        });\r\n        if (!res.ok) {\r\n          const data = await res.json();\r\n          setError(data.error || 'Error al editar asignatura');\r\n          setSuccess('');\r\n        } else {\r\n          const updated = await res.json();\r\n          setForm({ nombre: '', area: '', codigo: '', gradoIds: [], asignaciones: [] });\r\n          setEditingId(null);\r\n          setSuccess('Asignatura actualizada correctamente.');\r\n          setLastCreatedId(updated.id);\r\n          await fetchDocentes();\r\n          await fetchAsignaturas();\r\n        }\r\n      } else {\r\n        const res = await fetch('/api/admin/asignaturas', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload),\r\n        });\r\n        if (!res.ok) {\r\n          const data = await res.json();\r\n          setError(data.error || 'Error al crear asignatura');\r\n          setSuccess('');\r\n        } else {\r\n          const nueva = await res.json();\r\n          setForm({ nombre: '', area: '', codigo: '', gradoIds: [], asignaciones: [] });\r\n          setSuccess('Asignatura creada correctamente.');\r\n          setLastCreatedId(nueva.id);\r\n          await fetchDocentes();\r\n          await fetchAsignaturas();\r\n        }\r\n      }\r\n    } catch {\r\n      setError('Error de red');\r\n      setSuccess('');\r\n    }\r\n    setCreating(false);\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    if (!window.confirm('¿Seguro que deseas eliminar esta asignatura?')) return;\r\n    try {\r\n      const res = await fetch('/api/admin/asignaturas', {\r\n        method: 'DELETE',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ id }),\r\n      });\r\n      if (!res.ok) {\r\n        const data = await res.json();\r\n        setError(data.error || 'Error al eliminar asignatura');\r\n      } else {\r\n        setAsignaturas(prev => prev.filter(a => a.id !== id));\r\n      }\r\n    } catch {\r\n      setError('Error de red');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (asig: Asignatura) => {\r\n    setForm({\r\n      nombre: asig.nombre,\r\n      area: asig.area,\r\n      codigo: asig.codigo,\r\n      gradoIds: asig.grados ? asig.grados.map(g => String(g.id)) : [],\r\n      asignaciones: asig.grados\r\n        ? asig.grados\r\n            .filter(g => Array.isArray((g as any).docentes) && (g as any).docentes.length > 0)\r\n            .map(g => ({ gradoId: g.id, docenteId: (g as any).docentes[0].id }))\r\n        : [],\r\n    });\r\n    setEditingId(asig.id);\r\n    setError('');\r\n    setSuccess('');\r\n    setFieldErrors({}); // Limpiar errores de validación\r\n  };\r\n\r\n  // Cargar grados al montar el componente\r\n  useEffect(() => {\r\n    fetch('/api/admin/grados')\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (Array.isArray(data)) setGrados(data);\r\n      });\r\n  }, []);\r\n\r\n  // --- LAYOUT VISUAL MODERNO Y CONSISTENTE ---\r\n  // Se agrega el sidebar y layout del dashboard admin, manteniendo tu lógica y comentarios intactos.\r\n  return (\r\n  <ProtectedRoute allowedRoles={[\"ADMIN\"]}>\r\n      <div className={styles.dashboardContainer}>\r\n        {/* Sidebar de navegación admin */}\r\n        <aside className={styles.sidebar}>\r\n          <div style={{ display: 'flex', alignItems: 'center', marginBottom: '3rem' }}>\r\n            <img src=\"/favicon.ico\" alt=\"Admin\" className={styles.avatar} />\r\n            <span className={styles.logo}>AulaUnida</span>\r\n          </div>\r\n          <nav className={styles.menu}>\r\n            <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n              {sidebarLinks.map(link => (\r\n                <li key={link.label}>\r\n                  <NextLink href={link.href} className={`${styles.menuItem} ${link.active ? styles.menuItemActive : ''}`}>\r\n                    <link.icon style={{ width: 24, height: 24, marginRight: 16 }} />\r\n                    {link.label}\r\n                  </NextLink>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </nav>\r\n        </aside>\r\n        {/* Main Content: aquí va tu lógica y UI original */}\r\n        <main className={styles.mainContent}>\r\n          <BackToDashboardButton />\r\n          <h1 className={styles.title}>Gestión de Asignaturas</h1>\r\n          <div className={styles.activityCard}>\r\n            <h2 className={styles.activityTitle}>\r\n              {editingId \r\n                ? `Editar Asignatura: ${form.nombre}` \r\n                : 'Crear Nueva Asignatura'\r\n              }\r\n            </h2>\r\n            {editingId && (\r\n              <p style={{ color: '#64748B', marginBottom: '1rem', fontSize: '14px' }}>\r\n                Puedes agregar o quitar grados, y cambiar la asignación de docentes para esta asignatura.\r\n              </p>\r\n            )}\r\n            <form className={formStyles.formBox} onSubmit={handleSubmit}>\r\n              <div className={formStyles.field}>\r\n                <label htmlFor=\"nombre\" className={formStyles.label}>Nombre</label>\r\n                <input\r\n                  id=\"nombre\"\r\n                  className={formStyles.input}\r\n                  placeholder=\"Nombre de la asignatura\"\r\n                  name=\"nombre\"\r\n                  value={form.nombre}\r\n                  onChange={handleChange}\r\n                  disabled={creating}\r\n                  autoComplete=\"off\"\r\n                />\r\n                {fieldErrors.nombre && <span className={formStyles.error}>{fieldErrors.nombre}</span>}\r\n              </div>\r\n              <div className={formStyles.field}>\r\n                <label htmlFor=\"area\" className={formStyles.label}>Área</label>\r\n                <input\r\n                  id=\"area\"\r\n                  className={formStyles.input}\r\n                  placeholder=\"Área de la asignatura\"\r\n                  name=\"area\"\r\n                  value={form.area}\r\n                  onChange={handleChange}\r\n                  disabled={creating}\r\n                  autoComplete=\"off\"\r\n                />\r\n                {fieldErrors.area && <span className={formStyles.error}>{fieldErrors.area}</span>}\r\n              </div>\r\n              <div className={formStyles.field}>\r\n                <label htmlFor=\"codigo\" className={formStyles.label}>Código</label>\r\n                <input\r\n                  id=\"codigo\"\r\n                  className={formStyles.input}\r\n                  placeholder=\"Código de la asignatura\"\r\n                  name=\"codigo\"\r\n                  value={form.codigo}\r\n                  onChange={handleChange}\r\n                  disabled={creating}\r\n                  autoComplete=\"off\"\r\n                />\r\n                {fieldErrors.codigo && <span className={formStyles.error}>{fieldErrors.codigo}</span>}\r\n              </div>\r\n              <div className={formStyles.field}>\r\n                <label htmlFor=\"gradoIds\" className={formStyles.label}>\r\n                  Grados \r\n                  <span style={{ fontSize: '12px', color: '#64748B', marginLeft: '8px' }}>\r\n                    (Mantén Ctrl presionado para seleccionar múltiples grados)\r\n                  </span>\r\n                </label>\r\n                {editingId && (\r\n                  <div style={{ \r\n                    fontSize: '12px', \r\n                    color: '#0ea5e9', \r\n                    marginBottom: '8px',\r\n                    padding: '8px 12px',\r\n                    backgroundColor: '#0f172a',\r\n                    borderRadius: '4px',\r\n                    border: '1px solid #1e40af'\r\n                  }}>\r\n                    Modo edición: Puedes agregar o quitar grados. Los grados actuales se mantendrán a menos que los deselecciones.\r\n                  </div>\r\n                )}\r\n                <select\r\n                  id=\"gradoIds\"\r\n                  multiple\r\n                  className={formStyles.select}\r\n                  name=\"gradoIds\"\r\n                  value={form.gradoIds}\r\n                  onChange={handleChange}\r\n                  disabled={creating}\r\n                  style={{ minHeight: '100px' }}\r\n                >\r\n                  {grados.length === 0 ? (\r\n                    <option value=\"\" disabled>No hay grados disponibles</option>\r\n                  ) : (\r\n                    grados.map(g => <option key={g.id} value={g.id}>{g.nombre} {g.seccion}</option>)\r\n                  )}\r\n                </select>\r\n                {form.gradoIds.length > 0 && (\r\n                  <div style={{ fontSize: '12px', color: '#22c55e', marginTop: '4px' }}>\r\n                    {form.gradoIds.length} grado(s) seleccionado(s): {\r\n                      form.gradoIds.map(id => {\r\n                        const grado = grados.find(g => String(g.id) === id);\r\n                        return grado ? `${grado.nombre} ${grado.seccion}` : '';\r\n                      }).join(', ')\r\n                    }\r\n                  </div>\r\n                )}\r\n                {fieldErrors.gradoIds && <span className={formStyles.error}>{fieldErrors.gradoIds}</span>}\r\n              </div>\r\n              <div className={formStyles.field}>\r\n                <label className={formStyles.label}>\r\n                  Docente por grado\r\n                  <span style={{ fontSize: '12px', color: '#64748B', marginLeft: '8px' }}>\r\n                    (Puedes asignar el mismo docente a múltiples grados)\r\n                  </span>\r\n                </label>\r\n                {form.gradoIds.length === 0 ? (\r\n                  <div style={{ color: '#64748B', fontSize: 14, padding: '12px', border: '1px dashed #374151', borderRadius: '6px', textAlign: 'center' }}>\r\n                    Primero selecciona uno o más grados arriba\r\n                  </div>\r\n                ) : (\r\n                  <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n                    {/* Botón de asignación rápida */}\r\n                    {form.gradoIds.length > 1 && (\r\n                      <div style={{ \r\n                        padding: '12px', \r\n                        backgroundColor: '#0f172a', \r\n                        borderRadius: '6px',\r\n                        border: '1px solid #1e40af'\r\n                      }}>\r\n                        <div style={{ fontSize: '14px', color: '#0ea5e9', marginBottom: '8px', fontWeight: 500 }}>\r\n                          Asignación Rápida: Mismo docente para todos los grados\r\n                          {editingId && <span style={{ marginLeft: '8px', fontSize: '12px' }}>(incluye grados nuevos)</span>}\r\n                        </div>\r\n                        <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n                          <select\r\n                            className={formStyles.select}\r\n                            onChange={e => asignarMismoDocente(e.target.value)}\r\n                            disabled={creating}\r\n                            style={{ flex: 1 }}\r\n                          >\r\n                            <option value=\"\">Seleccionar docente para todos...</option>\r\n                            {docentes.map(d => <option key={d.id} value={d.id}>{d.name}</option>)}\r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    {form.gradoIds.map(gradoId => {\r\n                      const grado = grados.find(g => String(g.id) === gradoId);\r\n                      return (\r\n                        <div key={gradoId} style={{ \r\n                          padding: '12px', \r\n                          backgroundColor: '#1E293B', \r\n                          borderRadius: '6px',\r\n                          border: '1px solid #334155'\r\n                        }}>\r\n                          <div style={{ \r\n                            fontWeight: 600, \r\n                            color: '#22c55e', \r\n                            marginBottom: '8px',\r\n                            fontSize: '14px'\r\n                          }}>\r\n                            {grado?.nombre} {grado?.seccion}\r\n                          </div>\r\n                          <select\r\n                            className={formStyles.select}\r\n                            value={form.asignaciones.find(a => a.gradoId === Number(gradoId))?.docenteId || ''}\r\n                            onChange={e => handleDocenteChange(Number(gradoId), e.target.value)}\r\n                            disabled={creating}\r\n                            style={{ marginTop: 0 }}\r\n                          >\r\n                            <option value=\"\">Seleccionar docente...</option>\r\n                            {docentes.map(d => <option key={d.id} value={d.id}>{d.name}</option>)}\r\n                          </select>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                    {form.gradoIds.length > 1 && (\r\n                      <div style={{ \r\n                        fontSize: '12px', \r\n                        color: '#0ea5e9', \r\n                        padding: '8px 12px',\r\n                        backgroundColor: '#0f172a',\r\n                        borderRadius: '4px',\r\n                        border: '1px solid #1e40af'\r\n                      }}>\r\n                        Tip: Puedes seleccionar el mismo docente para todos los grados si quieres que dé la misma materia en múltiples cursos\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className={formStyles.buttonBox}>\r\n                <button\r\n                  type=\"submit\"\r\n                  className={formStyles.saveButton}\r\n                  disabled={creating || !!fieldErrors.nombre || !!fieldErrors.area || !!fieldErrors.codigo || !!fieldErrors.gradoIds}\r\n                >\r\n                  {creating \r\n                    ? (editingId ? 'Guardando cambios...' : 'Creando asignatura...') \r\n                    : (editingId ? 'Actualizar asignatura' : 'Crear asignatura')\r\n                  }\r\n                </button>\r\n                {editingId && (\r\n                  <button \r\n                    type=\"button\" \r\n                    style={{\r\n                      background: '#64748B',\r\n                      color: 'white',\r\n                      borderRadius: '6px',\r\n                      padding: '10px 24px',\r\n                      border: 'none',\r\n                      cursor: 'pointer',\r\n                      marginLeft: '12px',\r\n                      fontSize: '16px'\r\n                    }}\r\n                    onClick={() => { \r\n                      setEditingId(null); \r\n                      setForm({ nombre: '', area: '', codigo: '', gradoIds: [], asignaciones: [] }); \r\n                      setError(''); \r\n                      setSuccess('');\r\n                      setFieldErrors({});\r\n                    }} \r\n                    disabled={creating}\r\n                  >\r\n                    Cancelar edición\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </form>\r\n            {error && <div style={{ color: 'red', marginBottom: 12 }}>{error}</div>}\r\n          </div>\r\n          <div className={styles.activityCard}>\r\n            <h2 className={styles.activityTitle}>Listado de Asignaturas</h2>\r\n            {success && <div style={{ color: 'green', marginBottom: 12 }}>{success}</div>}\r\n            {loading ? (\r\n              <LoadingModal open={delayedOpen} message=\"Cargando asignaturas...\" />\r\n            ) : (\r\n              <table className={styles.activityTable} ref={tableRef}>\r\n                <thead>\r\n                  <tr>\r\n                    <th>Nombre</th>\r\n                    <th>Área</th>\r\n                    <th>Código</th>\r\n                    <th>Grado</th>\r\n                    <th>Docente</th>\r\n                    <th>Acciones</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {asignaturas.length === 0 ? (\r\n                    <tr><td colSpan={6} style={{ padding: '2rem', textAlign: 'center', color: '#B0B3B8' }}>Sin asignaturas registradas</td></tr>\r\n                  ) : (\r\n                    asignaturas.map((a, idx) => (\r\n                      <tr key={a.id || idx} style={lastCreatedId === a.id ? { background: '#e0ffe0', fontWeight: 600 } : {}}>\r\n                        <td className={styles.activityUser}>{a.nombre}</td>\r\n                        <td className={styles.activityAction}>{a.area}</td>\r\n                        <td className={styles.activityAction}>{a.codigo}</td>\r\n                        <td className={styles.activityAction}>\r\n                          {a.grados && a.grados.length > 0 ? (\r\n                            <ul style={{ margin: 0, padding: 0, listStyle: 'none' }}>\r\n                              {a.grados.map(g => (\r\n                                <li key={g.id}>\r\n                                  <strong>{g.nombre} {g.seccion}:</strong> {Array.isArray((g as any).docentes) && (g as any).docentes.length > 0\r\n                                    ? (g as any).docentes.map((d: any) => d.name).join(', ')\r\n                                    : <span style={{ color: '#888' }}>Sin docente</span>}\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                          ) : '-'}\r\n                        </td>\r\n                        <td className={styles.activityAction}>\r\n                          <Button style={{ color: 'var(--color-primary)', marginRight: 8 }} variant=\"ghost\" onClick={() => handleEdit(a)}>Editar</Button>\r\n                          <button style={{ color: '#dc2626' }} onClick={() => handleDelete(a.id)}>Eliminar</button>\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}